# Story 4.6: Victory Screen & Artifact Download

## Status
Done

## Executor Assignment
executor: "@dev"
quality_gate: "@qa"
quality_gate_tools: [lint, typecheck, manual-test]

## Story
**As a** consultant,
**I want** a celebration screen when pipeline completes with stats and download option,
**so that** I feel rewarded and can easily access all deliverables.

## Acceptance Criteria
1. `VictoryScreen.tsx` as fullscreen overlay
2. Triggered by `pipeline-complete` event
3. Neo success animation scaled 3x
4. Green particle explosion (50+ particles)
5. Stats: total time, artifacts (7/7), stages (7/7), total word count
6. "MISSION COMPLETE" in Press Start 2P with green glow
7. Download All: ZIP with all artifacts + landing page
8. View Proposal: opens in new tab
9. View Landing Page: opens in new tab
10. New Mission: resets pipeline
11. Dismissable via click outside or Escape
12. Matrix rain intensifies then fades

## Traceability
- FR40: Tela de vitoria com Neo em pose de sucesso e particulas verdes
- FR41: Download de todos os artefatos em ZIP

## Tasks / Subtasks

- [x] Task 1: Create VictoryScreen component (AC: 1, 6, 11)
  - [ ] Create `frontend/src/components/VictoryScreen.tsx`
  - [ ] Fullscreen overlay with dark backdrop
  - [ ] "MISSION COMPLETE" title in Press Start 2P with green glow animation
  - [ ] Dismissable via click outside or Escape key
  - [ ] Matrix theme consistent
- [x] Task 2: Neo animation and particles (AC: 3, 4, 12)
  - [ ] Display Neo sprite scaled 3x in center
  - [ ] Trigger success animation
  - [ ] Green particle explosion: 50+ particles burst from Neo
  - [ ] Matrix rain intensifies for 2s then fades back
- [x] Task 3: Stats display (AC: 5)
  - [ ] Read from useGameStore: elapsedMs, artifactsCollected, stagesCompleted
  - [ ] Calculate total word count from artifacts via API
  - [ ] Display in grid: Time, Artifacts (7/7), Stages (7/7), Words
- [x] Task 4: Action buttons (AC: 7, 8, 9, 10)
  - [ ] Download All: `GET /api/artifacts/{sessionId}/download` returns ZIP
  - [ ] View Proposal: opens `/api/artifacts/{sessionId}/proposta/preview` in new tab
  - [ ] View Landing Page: opens `/api/artifacts/{sessionId}/landing-page` in new tab
  - [ ] New Mission: reset all stores, clear pipeline state
- [x] Task 5: Backend ZIP endpoint (AC: 7)
  - [ ] Add `GET /api/artifacts/{sessionId}/download` route
  - [ ] Bundle all .md files + landing-page folder into ZIP
  - [ ] Stream response with correct headers
- [x] Task 6: Pipeline complete trigger (AC: 2)
  - [ ] Listen for `pipeline-complete` event in usePipelineStore
  - [ ] Show VictoryScreen when pipeline status is `completed`

## Dev Notes

### Architecture Reference
- Pipeline orchestrator emits `pipeline-complete` event (Story 2.3)
- Artifacts at `docs/artifacts/{sessionId}/`
- useGameStore tracks artifacts, stages, timer

### Dependencies
- Story 2.3 (Pipeline Orchestrator) — pipeline-complete event
- Story 4.4 (Proposal) — View Proposal link
- Story 4.5 (Landing Page) — View Landing Page link

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-02-27 | 1.0 | Story created from PRD Epic 4 | River (SM) |

## QA Results
(to be filled by QA agent)
