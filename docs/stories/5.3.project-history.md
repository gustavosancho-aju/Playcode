# Story 5.3: Historico de Projetos

## Status
Done

## Executor Assignment
executor: "@dev"
quality_gate: "@qa"
quality_gate_tools: [lint, typecheck, manual-test]

## Story
**As a** usuario do Squad Playground,
**I want** uma pagina onde possa ver todos os projetos/sessoes ja executados com seus artefatos,
**so that** eu consiga revisitar entregas anteriores, comparar resultados e reutilizar conteudo.

## Acceptance Criteria
1. Nova tab "Projetos" no navigation bar
2. Lista todas as sessoes anteriores salvas em `docs/artifacts/`
3. Cada sessao mostra: ID da sessao, data de execucao, numero de artefatos, tipo de pipeline
4. Click numa sessao expande para mostrar lista de artefatos
5. Click num artefato abre preview do conteudo (markdown renderizado ou HTML)
6. Para artefatos HTML (landing pages): botao "Abrir em nova aba"
7. Busca/filtro por texto no nome da sessao ou conteudo dos artefatos
8. Ordenacao por data (mais recente primeiro)
9. Indicador visual do tipo de pipeline (briefing vs consultoria)
10. Botao "Reutilizar" que copia o prompt inicial da sessao para iniciar nova pipeline

## Tasks / Subtasks

- [ ] Task 1: Backend — API de listagem de sessoes (AC: 2, 3, 8)
  - [ ] GET /api/sessions — lista sessoes do filesystem (docs/artifacts/*)
  - [ ] Cada sessao retorna: sessionId, createdAt (do diretorio), artifacts[], pipelineType
  - [ ] Ler state.json de cada sessao para metadata
  - [ ] Ordenar por data desc
- [ ] Task 2: Backend — API de leitura de artefatos (AC: 5)
  - [ ] GET /api/sessions/:sessionId/artifacts — lista artefatos da sessao
  - [ ] GET /api/sessions/:sessionId/artifacts/:filename — conteudo do artefato
  - [ ] Retornar content-type adequado (text/markdown ou text/html)
- [ ] Task 3: Criar componente ProjectHistory.tsx (AC: 1, 3, 4, 9)
  - [ ] Lista de sessoes como cards expansiveis
  - [ ] Badge de tipo (briefing/consultoria)
  - [ ] Expandir mostra artefatos com icones por tipo
- [ ] Task 4: Preview de artefatos (AC: 5, 6)
  - [ ] Modal de preview com markdown renderizado
  - [ ] Para HTML: iframe preview + botao "Abrir em nova aba"
- [ ] Task 5: Busca e filtros (AC: 7)
  - [ ] Input de busca no topo
  - [ ] Busca client-side pelo nome/id da sessao
- [ ] Task 6: Reutilizar sessao (AC: 10)
  - [ ] Botao que extrai prompt inicial e redireciona para pipeline

## File List
- [ ] `backend/src/routes/sessions.ts` — Novas rotas de sessoes
- [ ] `backend/src/index.ts` — Registrar novo router
- [ ] `frontend/src/components/ProjectHistory.tsx` — Componente principal
- [ ] `frontend/src/components/ArtifactPreview.tsx` — Modal de preview
- [ ] `frontend/src/App.tsx` — Adicionar tab

## Dependencies
- Story 5.1 (sistema de navegacao)
- Artefatos em docs/artifacts/{sessionId}/ (ja existem)
- artifactManager no backend (ja existe)
