# Story 5.5: Tela de Memoria

## Status
InProgress

## Executor Assignment
executor: "@dev"
quality_gate: "@qa"
quality_gate_tools: [lint, typecheck, manual-test]

## Story
**As a** usuario do Squad Playground,
**I want** uma tela que liste todas as memorias e artefatos gerados em documentos navegaveis com busca,
**so that** eu consiga encontrar rapidamente qualquer informacao produzida pelo sistema.

## Acceptance Criteria
1. Nova tab "Memoria" no navigation bar
2. Lista todos os artefatos de TODAS as sessoes como documentos
3. Cada documento mostra: titulo (filename), sessao de origem, agente que gerou, data
4. Busca full-text pelo conteudo dos artefatos
5. Busca retorna resultados com snippet/highlight do trecho encontrado
6. Filtro por agente gerador
7. Filtro por tipo de artefato (markdown, html)
8. Click num documento abre preview completo
9. Documentos renderizados de forma bonita (markdown styled)
10. Paginacao ou scroll infinito para muitos documentos

## Tasks / Subtasks

- [x] Task 1: Backend — Indexar artefatos (AC: 2, 3, 4, 5)
  - [x] GET /api/memory/search?q=texto — busca grep nos artefatos
  - [x] GET /api/memory/documents — lista todos artefatos com metadata
  - [x] Extrair metadata: agente (do prefixo do filename), sessao (do diretorio), data (mtime)
  - [x] Retornar snippet com contexto ao redor do match
- [x] Task 2: Criar componente MemoryScreen.tsx (AC: 1, 2, 3, 9)
  - [x] Lista de documentos como cards com metadata
  - [x] Renderizacao bonita do markdown
  - [x] Icone e cor do agente que gerou
- [x] Task 3: Busca (AC: 4, 5)
  - [x] Search bar no topo com debounce
  - [x] Resultados mostram snippets com highlight
  - [x] "X resultados encontrados" counter
- [x] Task 4: Filtros (AC: 6, 7)
  - [x] Chips de filtro por agente
  - [x] Toggle por tipo (md/html)
- [x] Task 5: Preview de documento (AC: 8, 9)
  - [x] Modal ou panel com documento completo renderizado
  - [x] Para HTML: iframe

## File List
- [x] `backend/src/routes/memory.ts` — Rotas de busca e listagem
- [x] `backend/src/index.ts` — Registrar router
- [x] `frontend/src/components/MemoryScreen.tsx` — Componente principal
- [x] `frontend/src/App.tsx` — Adicionar tab

## Dependencies
- Story 5.1 (navegacao)
- Story 5.3 (backend de sessoes — reutilizar logica)
- Artefatos em docs/artifacts/
